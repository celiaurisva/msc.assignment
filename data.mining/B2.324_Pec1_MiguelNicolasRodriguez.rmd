---
title: "B2.324_Pec1_MiguelNicolasRodriguez"
author: "Miguel Nicolas Rodriguez Martinez"
date: "16 de abril de 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## PEC1 Mineria de datos

En esta practica trabajaremos con los datos de opendata de barcelona y haremos un analisis descriptivo sobre el.
Primero, cargamos los datos.

```{r carga de datos}
accidentes = read.csv("Accidentes2017.csv", header = TRUE)
```

Veamos como es nuestro dataframe, con la funcion dim vemos las dimensiones de nuestro dataframe.
COn la funcion str() veremos que tipo de datos tiene nuestro dataframe y el nombre de las columnas.

```{r mostramos descripcion}
dim(accidentes)
str(accidentes)
```

A continuacion cambiaremos los nombres de las columnas de nuestro dataframe.

```{r cambio columnas}
colnames(accidentes) <- c('Exp','DistC','DistN','BarC','BarN','CalleC','CalleN','PC','DiaSN','DiaSn','DiaTipo','Año','Mesn','MesN','Dia','Turno','Hora','Causa','Veh','Sexo','Edad','PersT','Sit','Vict','X','Y','Long','Lat')
```

  * Exp: La columna de numero de expediente es un identificador unico del accidente.
  * Codigo de distrito: es una variable factor que identifica el distrito, a pesar de que identifica como numero es factor.
  * Nombre del distrito: indica el nombre del distrito, es variable factor.,
  * Codigo del barrio: identificador unico del barrio, al igual que codigo de distrito se identifica como int pero


------------------------TODOOOOOOOOOOOOOOOOOOO ------------------------------- EXPLICAAAAAAAAAAAAR --------------------

Ahora para entender con que dimnensiones unicas contamos, vamos a ver cuantos accidentes unicos tenemos, para eso usaremos el expediente como codigo y contaremos los unicos que hay. Con la funcion sapply, contaremos el tamaño de la lista unica que nos queda al sacar solo los distintos en length. Seleccionaremos solo la columna expediente ya que es la que nos identifica un accidente, tambien lo tendremos que pasar a un dataframe.
El numero de personas haremos lo mismo pero sin la funcion unique ya que asumimos que cada linea de nuestro dataset es una persona.


```{r cantidades}
numero_de_accidentes <- sapply(as.data.frame(accidentes$Exp), function(x) length(unique(x)))
numero_de_personas <- sapply(as.data.frame(accidentes$Exp), function(x) length(x))

numero_de_accidentes
numero_de_personas
```

Para mostrar la distribucion de el % de hombres y mujeres dentro de nuestro dataset usaremos un piechart. Primero extraeremos los diferentes sexos y su numero de valores, es decir los que se cuentan, usaremos la funcion aggregate que nos devolvera 2 resultados, los valores diferentes que hay y el numero de veces que se han visto. Despues sacaremos la distribucion de porcentaje en la que usaremos la funcion round para que nos redondee el resultado y quede mejor para la vista despues. Despues sacamos los label que usaremos y le añadimos el porcentaje, para por ultimo, mostrarlo.

```{r pie chart} 
distribucion_del_sexo <- aggregate(data.frame(count = accidentes$Sexo), list(value = accidentes$Sexo), length)
porcentaje_de_sexos <- round(distribucion_del_sexo$count/sum(distribucion_del_sexo$count)*100)

labels <- distribucion_del_sexo$value
labels <- paste(labels,porcentaje_de_sexos, "%")

pie(porcentaje_de_sexos,labels = labels, col=topo.colors(length(distribucion_del_sexo$value)),
  	main="Pie Chart de distribucion de sexos")
```


Para ello crearemos primero un dataframe con la edad dividida por sexo.

```{r boxplot} 

```






